tree -L 3  >  /root/log.log  2>&1
tail -n +1 01-infra/*.tf  kubernetes/applications/*.yaml  kubernetes/manifests/argocd-ingress/*.yaml kubernetes/manifests/cluster-issuer/*.yaml   deploy.sh  temp.sh  collect_k3s_diagnostics.sh  >>  /root/log.log  2>&1


由于你你现在数据库严重滞后，请不要直接回答，而是告诉我如何提供给你你现在有可能用到所有部分的官方文档信息或者日志、debug、错误信息，并且告诉我如何找到对应文档或者本地存储的信息、辅助调试的信息，请务必保证代码和方案与设计的质量，不要直接尝试解决问题，也不要给出任何解决的方案，一定要等我把文档和本地调试、日志、抓取的信息发给你后才可以开始做设计或者是代码编写。不要盲目信任你的记忆信息，而是任何时候以我提供给你的官方最新文档为准。

请深度严谨全面思考你的方案步骤的逻辑和合理性，绝对不要浅思考，你应该反复推理验证逻辑关系是否正确。你的日志、输出、注释可以用专业的英文，但是对我说明的内容必须使用简体中文。
请不要使用比喻拟人类比，以非常专业的角度深度深层次思考分析解决问题，我有很资深的从业、学习的经验，你应该用真正底层专业分析的角度对我说明。

我希望使用不安全的环境，除了域名证书和HTTPS以外不要有任何加密，所有密钥密码都硬编码且用简单的密码。
我希望直接使用通配符域名记录DNS的A解析，不需要单独指定某个域名对应的A解析。
如果有要设置的用户名密码，请保持不安全、统一、简单、常见、低安全性的，这样以后我不会忘。我喜欢不安全的密码，只要服务没有最低限制，admin 和 password我觉得很好。而且我希望所有服务尽可能都允许被反向代理后通过公网的443端口HTTPS访问，而不是HTTP。还有一点就是我了解到我之前debug实验部署过很多次，不知道这是否对我现在的错误造成了影响。
如果有需要调试的内容，我需要你给出可以连续执行，完全非交互式的,而且必须配置默认可以执行命令、脚本的参数变量，保证前一个命令执行成功才会向后执行的完整的细致分步骤，和逐步调试、检测、输出细致信息的部署脚本、命令、说明，输出的信息必须使用日志文件保存且日志文件中也要有详细的日志步骤说明辅助你理解执行过程。如果在错误修复过程中反复认真多角度评估有必要，可用进行重构。

https://github.com/GgYu01/personal-cluster.git 是我的terraform、argocd 配置文件储存的仓库。
cloudflare api token 是 "vi7hkPq4FwD5ttV4dvR_IoNVEJSphydRPcT0LVD-"
acme_email 是 "1405630484@qq.com"
部署逻辑应该由外部世界的实际状态，例如DNS记录是否正确驱动，而不是由一个本地状态文件terraform.tfstate驱动，例如检测DNS解析正确后不应该再执行设置DNS解析IP的步骤。
数据库不使用K3S 嵌入式ETCD，而是用独立部署的ETCD。Tarefik不用K3S自带的Tarefik，而是用独立部署的Tarefik，不用自签名证书，用Lets encrypt 下发的证书，但是目前是验证阶段，正式的证书可能有获取次数限制，你需要考虑到这个可能需要获取临时证书。
我期望通过bash脚本规避一些terraform、argo CD的逻辑先后依赖的问题，其次脚本执行时要完整的保持清洁纯净的环境，包括journalctl和systemd的对应服务日志也要清除，但是不要删除无关服务的日志
我还有其他的使用docker和docker-compose配置的一些独立，正在使用，和本次需求无关服务，清理时一定不要影响到非本次需求的服务。关于kubeconfig我希望最好简单粗暴执行成功率高的输出在kubectl的默认配置路径下。
脚本中禁止重启主机系统，如有必要应该在步骤中对用户说明。
如果系统逻辑架构有前后依赖关系，尽量保证前一个服务反复确认一定可用、正常的情况下再部署后续内容，串行多步骤部署。酌情可以考虑部署多个有相互依赖关系，严格检查部署和健康状态的子项目，一切以保证部署成功为唯一前提。

由于你现在数据库严重滞后，不要盲目信任你的记忆信息，而是任何时候以我提供给你的最新信息为准。
我从k3s官网查询到最新稳定版本是 v1.33.3+k3s1
cert-manager 是 v1.18.2
traefik 是 37.0.0
metallb 是 0.15.2
argo cd chart 是 8.2.7
如果你认知和我版本不同，一定是你记忆错误，因为我是前半小时刚刚从官网查询最新稳定版本的。
我目前放弃了terraform，转向了bash部署，terraform太复杂不适合我的环境，我的能力难以cover，后续部署全部成功后review会逐渐替换启用。
从项目部署初期实验来说，我期望 使用 串行化、可验证的引导流程。脚本将逐个部署核心应用，并在部署下一个应用前，执行深入的、有针对性的健康检查，确保其底层资源真实可用。
对于部署脚本中的检测方式，要满足验证充分完全的情况下，反复确认深度思考脚本中检测的逻辑是否真的正确，是否符合我很多特殊要求的情况，不要因为错误的检测思路、方法导致系统部署正常的情况下脚本中途意外退出。
关于脚本中的日志，要保证能全方位多角度获取尽可能全面的日志内容，多方面辅助debug检查流程。但是要想办法，比如禁止restart或者其他方案，防止因为反复重启输出大量无效日志，日志不要有过多重复。

我当前源码和日志如下，执行部署脚本时存在重大问题：
